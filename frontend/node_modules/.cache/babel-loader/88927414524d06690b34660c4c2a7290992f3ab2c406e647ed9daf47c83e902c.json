{"ast":null,"code":"var _jsxFileName = \"/home/subchief/JengAEA/frontend/src/pages/EstimatePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Calculator, Save, Share, Download, AlertCircle } from 'lucide-react';\nimport Card from '../components/common/Card';\nimport Button from '../components/common/Button';\nimport Input from '../components/common/Input';\nimport PlanUploader from '../components/common/PlanUploader';\nimport { estimatesAPI, projectsAPI } from '../utils/api';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EstimatePage = () => {\n  _s();\n  var _estimationResult$cal, _estimationResult$bre, _estimationResult$bre2, _estimationResult$bre3, _estimationResult$cal2, _estimationResult$cal3, _estimationResult$cal4;\n  const [formData, setFormData] = useState({\n    projectName: '',\n    constructionType: 'new_construction',\n    buildingType: '',\n    location: '',\n    dataPeriod: '3months',\n    projectDescription: '',\n    total_area: ''\n  });\n  const [mode, setMode] = useState('manual');\n  const [projectTypes, setProjectTypes] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [charCount, setCharCount] = useState(0);\n  const [validationErrors, setValidationErrors] = useState({});\n  const [estimationResult, setEstimationResult] = useState(null);\n\n  // Local county list (use this instead of fetching from backend)\n  const COUNTY_LIST = [{\n    id: 1,\n    county_name: 'Mombasa'\n  }, {\n    id: 2,\n    county_name: 'Kwale'\n  }, {\n    id: 3,\n    county_name: 'Kilifi'\n  }, {\n    id: 4,\n    county_name: 'Tana River'\n  }, {\n    id: 5,\n    county_name: 'Lamu'\n  }, {\n    id: 6,\n    county_name: 'Taita-Taveta'\n  }, {\n    id: 7,\n    county_name: 'Garissa'\n  }, {\n    id: 8,\n    county_name: 'Wajir'\n  }, {\n    id: 9,\n    county_name: 'Mandera'\n  }, {\n    id: 10,\n    county_name: 'Marsabit'\n  }, {\n    id: 11,\n    county_name: 'Isiolo'\n  }, {\n    id: 12,\n    county_name: 'Meru'\n  }, {\n    id: 13,\n    county_name: 'Tharaka-Nithi'\n  }, {\n    id: 14,\n    county_name: 'Embu'\n  }, {\n    id: 15,\n    county_name: 'Kitui'\n  }, {\n    id: 16,\n    county_name: 'Machakos'\n  }, {\n    id: 17,\n    county_name: 'Makueni'\n  }, {\n    id: 18,\n    county_name: 'Nyandarua'\n  }, {\n    id: 19,\n    county_name: 'Nyeri'\n  }, {\n    id: 20,\n    county_name: 'Kirinyaga'\n  }, {\n    id: 21,\n    county_name: \"Murang'a\"\n  }, {\n    id: 22,\n    county_name: 'Kiambu'\n  }, {\n    id: 23,\n    county_name: 'Turkana'\n  }, {\n    id: 24,\n    county_name: 'West Pokot'\n  }, {\n    id: 25,\n    county_name: 'Samburu'\n  }, {\n    id: 26,\n    county_name: 'Trans Nzoia'\n  }, {\n    id: 27,\n    county_name: 'Uasin Gishu'\n  }, {\n    id: 28,\n    county_name: 'Elgeyo-Marakwet'\n  }, {\n    id: 29,\n    county_name: 'Nandi'\n  }, {\n    id: 30,\n    county_name: 'Baringo'\n  }, {\n    id: 31,\n    county_name: 'Laikipia'\n  }, {\n    id: 32,\n    county_name: 'Nakuru'\n  }, {\n    id: 33,\n    county_name: 'Narok'\n  }, {\n    id: 34,\n    county_name: 'Kajiado'\n  }, {\n    id: 35,\n    county_name: 'Kericho'\n  }, {\n    id: 36,\n    county_name: 'Bomet'\n  }, {\n    id: 37,\n    county_name: 'Kakamega'\n  }, {\n    id: 38,\n    county_name: 'Vihiga'\n  }, {\n    id: 39,\n    county_name: 'Bungoma'\n  }, {\n    id: 40,\n    county_name: 'Busia'\n  }, {\n    id: 41,\n    county_name: 'Siaya'\n  }, {\n    id: 42,\n    county_name: 'Kisumu'\n  }, {\n    id: 43,\n    county_name: 'Homa Bay'\n  }, {\n    id: 44,\n    county_name: 'Migori'\n  }, {\n    id: 45,\n    county_name: 'Kisii'\n  }, {\n    id: 46,\n    county_name: 'Nyamira'\n  }, {\n    id: 47,\n    county_name: 'Nairobi'\n  }];\n  useEffect(() => {\n    const fetchProjectTypes = async () => {\n      try {\n        const {\n          data\n        } = await projectsAPI.getProjectTypes();\n        setProjectTypes(data);\n      } catch (err) {\n        console.error('Failed to fetch project types:', err);\n      }\n    };\n    fetchProjectTypes();\n  }, []);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (name === 'projectDescription') {\n      setCharCount(value.length);\n    }\n  };\n  const validateForm = () => {\n    const errors = {};\n    if (!formData.projectName.trim()) errors.projectName = 'Project name is required';\n    if (!formData.buildingType) errors.buildingType = 'Building type is required';\n    if (!formData.location) errors.location = 'Location is required';\n    if (!formData.total_area || Number(formData.total_area) <= 0) errors.total_area = 'Total area must be greater than 0';\n    if (formData.projectDescription.length > 150) {\n      errors.projectDescription = 'Description must not exceed 150 characters';\n    }\n    return errors;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const errors = validateForm();\n    if (Object.keys(errors).length > 0) {\n      setValidationErrors(errors);\n      return;\n    }\n    setIsLoading(true);\n    try {\n      // Find a project_type id that matches selected buildingType category\n      let project_type_id = null;\n      if (projectTypes && projectTypes.length > 0) {\n        const found = projectTypes.find(pt => pt.category === formData.buildingType);\n        project_type_id = found ? found.id : projectTypes[0].id;\n      }\n      const payload = {\n        project_type_id: project_type_id,\n        location_id: parseInt(formData.location, 10),\n        total_area: parseFloat(formData.total_area),\n        contingency_percentage: 10.0\n      };\n      const {\n        data\n      } = await estimatesAPI.calculateCost(payload);\n      setEstimationResult(data);\n      toast.success('Estimate calculated');\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      // Improved error logging for debugging\n      console.error('Failed to calculate estimate. Error object:', err);\n      if (err.response) {\n        console.error('Response status:', err.response.status);\n        console.error('Response data:', err.response.data);\n      } else if (err.request) {\n        console.error('No response received. Request:', err.request);\n      } else {\n        console.error('Request setup error:', err.message);\n      }\n      toast.error((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to calculate estimate');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handlePlanUpload = async file => {\n    setIsLoading(true);\n    try {\n      // Pass file object directly - api wrapper will build FormData\n      const response = await estimatesAPI.uploadEstimate(file);\n      // Build estimationResult from uploaded estimate (server saved calculated fields)\n      const est = response.data.estimate || response.data;\n      if (est) {\n        // compute breakdown similar to backend calculate_cost\n        const adjusted = parseFloat(est.adjusted_cost_per_sqm || est.base_cost_per_sqm * (est.location_multiplier || 1));\n        const total_area = parseFloat(est.total_area || 0);\n        const base_total = adjusted * total_area;\n        const contingency = parseFloat(est.contingency_amount || base_total * (est.contingency_percentage || 10) / 100);\n        const custom_items_total = 0;\n        const final_total = parseFloat(est.total_estimated_cost || base_total + contingency + custom_items_total);\n        setEstimationResult({\n          project_type: est.project_type_data || null,\n          location: est.location_data || null,\n          calculations: {\n            total_area,\n            base_cost_per_sqm: parseFloat(est.base_cost_per_sqm || 0),\n            adjusted_cost_per_sqm: adjusted,\n            base_total_cost: base_total,\n            contingency_percentage: parseFloat(est.contingency_percentage || 10),\n            contingency_amount: contingency,\n            custom_items_total,\n            final_total_cost: final_total\n          },\n          breakdown: {\n            materials: base_total * 0.6,\n            labor: base_total * 0.3,\n            equipment: base_total * 0.1,\n            contingency: contingency,\n            custom_items: custom_items_total\n          }\n        });\n      }\n      toast.success('Plan uploaded successfully');\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error('Failed to upload plan:', err);\n      toast.error((err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || 'Failed to upload plan');\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const formatKES = value => {\n    try {\n      const v = Number(value) || 0;\n      return new Intl.NumberFormat('en-KE', {\n        style: 'currency',\n        currency: 'KES',\n        maximumFractionDigits: 2\n      }).format(v);\n    } catch (e) {\n      return `Ksh ${value}`;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-gray-900\",\n        children: \"Create New Estimate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-2 text-gray-600\",\n        children: \"Fill in the project details to generate a construction cost estimate.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-2\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg font-semibold text-gray-900\",\n                children: \"Project Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-4\",\n                children: [Object.keys(validationErrors).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center text-red-600\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                    className: \"w-4 h-4 mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm\",\n                    children: \"Please fix the errors below\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex rounded-md shadow-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => setMode('manual'),\n                    className: `px-4 py-2 text-sm font-medium rounded-l-md border ${mode === 'manual' ? 'bg-primary-500 text-white border-primary-500' : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'}`,\n                    children: \"Manual Entry\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => setMode('upload'),\n                    className: `px-4 py-2 text-sm font-medium rounded-r-md border-t border-r border-b ${mode === 'upload' ? 'bg-primary-500 text-white border-primary-500' : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'}`,\n                    children: \"Upload Plan\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: mode === 'upload' ? /*#__PURE__*/_jsxDEV(PlanUploader, {\n              onUpload: handlePlanUpload,\n              onCancel: () => setMode('manual')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit,\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Project Name*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    type: \"text\",\n                    name: \"projectName\",\n                    value: formData.projectName,\n                    onChange: handleInputChange,\n                    placeholder: \"Enter project name\",\n                    error: validationErrors.projectName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 23\n                  }, this), validationErrors.projectName && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-1 text-sm text-red-600\",\n                    children: validationErrors.projectName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Construction Type*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"constructionType\",\n                    value: formData.constructionType,\n                    onChange: handleInputChange,\n                    className: \"input w-full\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"new_construction\",\n                      children: \"New Construction\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"repair\",\n                      children: \"Repair\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Building Type*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"buildingType\",\n                    value: formData.buildingType,\n                    onChange: handleInputChange,\n                    className: `input w-full ${validationErrors.buildingType ? 'border-red-500' : ''}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select building type\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 311,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"residential\",\n                      children: \"Residential\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"commercial\",\n                      children: \"Commercial\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 313,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"infrastructure\",\n                      children: \"Infrastructure\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 314,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"industrial\",\n                      children: \"Industrial\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 23\n                  }, this), validationErrors.buildingType && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-1 text-sm text-red-600\",\n                    children: validationErrors.buildingType\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Location (County)*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"location\",\n                    value: formData.location,\n                    onChange: handleInputChange,\n                    className: `input w-full ${validationErrors.location ? 'border-red-500' : ''}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select county\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 25\n                    }, this), COUNTY_LIST && COUNTY_LIST.length > 0 ? COUNTY_LIST.map(county => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: county.id,\n                      children: county.county_name\n                    }, county.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 332,\n                      columnNumber: 29\n                    }, this)) : /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      disabled: true,\n                      children: \"Loading counties...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 337,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 23\n                  }, this), validationErrors.location && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-1 text-sm text-red-600\",\n                    children: validationErrors.location\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Data Period\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"dataPeriod\",\n                    value: formData.dataPeriod,\n                    onChange: handleInputChange,\n                    className: \"input w-full\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"3months\",\n                      children: \"3 Months\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 355,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"6months\",\n                      children: \"6 Months\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 356,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"9months\",\n                      children: \"9 Months\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 357,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"12months\",\n                      children: \"12 Months\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 358,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 349,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                    children: \"Total Area (sqm)*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    type: \"number\",\n                    name: \"total_area\",\n                    value: formData.total_area || '',\n                    onChange: handleInputChange,\n                    placeholder: \"Enter total area in sqm\",\n                    error: validationErrors.total_area\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 23\n                  }, this), validationErrors.total_area && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-1 text-sm text-red-600\",\n                    children: validationErrors.total_area\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-700 mb-1\",\n                  children: [\"Project Description\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-500 ml-1\",\n                    children: [\"(\", charCount, \"/150)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 380,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  name: \"projectDescription\",\n                  value: formData.projectDescription,\n                  onChange: handleInputChange,\n                  className: `input w-full ${validationErrors.projectDescription ? 'border-red-500' : ''}`,\n                  rows: 4,\n                  placeholder: \"Describe your project...\",\n                  maxLength: 150\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 21\n                }, this), validationErrors.projectDescription && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-sm text-red-600\",\n                  children: validationErrors.projectDescription\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 392,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-end space-x-3\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  disabled: isLoading,\n                  children: [/*#__PURE__*/_jsxDEV(Calculator, {\n                    className: \"w-4 h-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 398,\n                    columnNumber: 23\n                  }, this), \"Generate Estimate\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-1\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold text-gray-900\",\n              children: \"Cost Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gray-50 p-4 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: \"Base Cost\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 417,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: formatKES((estimationResult === null || estimationResult === void 0 ? void 0 : (_estimationResult$cal = estimationResult.calculations) === null || _estimationResult$cal === void 0 ? void 0 : _estimationResult$cal.base_total_cost) || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: \"Materials\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: formatKES((estimationResult === null || estimationResult === void 0 ? void 0 : (_estimationResult$bre = estimationResult.breakdown) === null || _estimationResult$bre === void 0 ? void 0 : _estimationResult$bre.materials) || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: \"Labor\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 425,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: formatKES((estimationResult === null || estimationResult === void 0 ? void 0 : (_estimationResult$bre2 = estimationResult.breakdown) === null || _estimationResult$bre2 === void 0 ? void 0 : _estimationResult$bre2.labor) || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: \"Equipment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium\",\n                    children: formatKES((estimationResult === null || estimationResult === void 0 ? void 0 : (_estimationResult$bre3 = estimationResult.breakdown) === null || _estimationResult$bre3 === void 0 ? void 0 : _estimationResult$bre3.equipment) || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-primary-50 p-4 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between mb-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-primary-600\",\n                    children: [\"Contingency (\", (estimationResult === null || estimationResult === void 0 ? void 0 : (_estimationResult$cal2 = estimationResult.calculations) === null || _estimationResult$cal2 === void 0 ? void 0 : _estimationResult$cal2.contingency_percentage) || 0, \"%)\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-medium text-primary-600\",\n                    children: formatKES((estimationResult === null || estimationResult === void 0 ? void 0 : (_estimationResult$cal3 = estimationResult.calculations) === null || _estimationResult$cal3 === void 0 ? void 0 : _estimationResult$cal3.contingency_amount) || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 437,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-primary-800 font-semibold\",\n                    children: \"Total Estimated Cost\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-bold text-primary-800\",\n                    children: formatKES((estimationResult === null || estimationResult === void 0 ? void 0 : (_estimationResult$cal4 = estimationResult.calculations) === null || _estimationResult$cal4 === void 0 ? void 0 : _estimationResult$cal4.final_total_cost) || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 441,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                className: \"w-full\",\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 19\n                }, this), \"Save as Draft\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                className: \"w-full\",\n                children: [/*#__PURE__*/_jsxDEV(Share, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 19\n                }, this), \"Share Estimate\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                className: \"w-full\",\n                children: [/*#__PURE__*/_jsxDEV(Download, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 19\n                }, this), \"Download Report\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6 p-4 bg-gray-50 rounded-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: \"This estimate is based on historical data from the selected period and location. Actual costs may vary based on market conditions and specific requirements.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 5\n  }, this);\n};\n_s(EstimatePage, \"nPKO3k2Udw1fvlHjf7M59lOL+Mo=\");\n_c = EstimatePage;\nexport default EstimatePage;\nvar _c;\n$RefreshReg$(_c, \"EstimatePage\");","map":{"version":3,"names":["React","useState","useEffect","Calculator","Save","Share","Download","AlertCircle","Card","Button","Input","PlanUploader","estimatesAPI","projectsAPI","toast","jsxDEV","_jsxDEV","EstimatePage","_s","_estimationResult$cal","_estimationResult$bre","_estimationResult$bre2","_estimationResult$bre3","_estimationResult$cal2","_estimationResult$cal3","_estimationResult$cal4","formData","setFormData","projectName","constructionType","buildingType","location","dataPeriod","projectDescription","total_area","mode","setMode","projectTypes","setProjectTypes","isLoading","setIsLoading","charCount","setCharCount","validationErrors","setValidationErrors","estimationResult","setEstimationResult","COUNTY_LIST","id","county_name","fetchProjectTypes","data","getProjectTypes","err","console","error","handleInputChange","e","name","value","target","prev","length","validateForm","errors","trim","Number","handleSubmit","preventDefault","Object","keys","project_type_id","found","find","pt","category","payload","location_id","parseInt","parseFloat","contingency_percentage","calculateCost","success","_err$response","_err$response$data","_err$response2","_err$response2$data","response","status","request","message","handlePlanUpload","file","uploadEstimate","est","estimate","adjusted","adjusted_cost_per_sqm","base_cost_per_sqm","location_multiplier","base_total","contingency","contingency_amount","custom_items_total","final_total","total_estimated_cost","project_type","project_type_data","location_data","calculations","base_total_cost","final_total_cost","breakdown","materials","labor","equipment","custom_items","_err$response3","_err$response3$data","formatKES","v","Intl","NumberFormat","style","currency","maximumFractionDigits","format","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Header","type","onClick","Body","onUpload","onCancel","onSubmit","onChange","placeholder","map","county","disabled","rows","maxLength","variant","_c","$RefreshReg$"],"sources":["/home/subchief/JengAEA/frontend/src/pages/EstimatePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Calculator, Save, Share, Download, AlertCircle } from 'lucide-react';\nimport Card from '../components/common/Card';\nimport Button from '../components/common/Button';\nimport Input from '../components/common/Input';\nimport PlanUploader from '../components/common/PlanUploader';\nimport { estimatesAPI, projectsAPI } from '../utils/api';\nimport toast from 'react-hot-toast';\n\nconst EstimatePage = () => {\n  const [formData, setFormData] = useState({\n    projectName: '',\n    constructionType: 'new_construction',\n    buildingType: '',\n    location: '',\n    dataPeriod: '3months',\n    projectDescription: '',\n    total_area: '',\n  });\n  const [mode, setMode] = useState('manual');\n  const [projectTypes, setProjectTypes] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [charCount, setCharCount] = useState(0);\n  const [validationErrors, setValidationErrors] = useState({});\n  const [estimationResult, setEstimationResult] = useState(null);\n\n  // Local county list (use this instead of fetching from backend)\n  const COUNTY_LIST = [\n    { id: 1, county_name: 'Mombasa' },\n    { id: 2, county_name: 'Kwale' },\n    { id: 3, county_name: 'Kilifi' },\n    { id: 4, county_name: 'Tana River' },\n    { id: 5, county_name: 'Lamu' },\n    { id: 6, county_name: 'Taita-Taveta' },\n    { id: 7, county_name: 'Garissa' },\n    { id: 8, county_name: 'Wajir' },\n    { id: 9, county_name: 'Mandera' },\n    { id: 10, county_name: 'Marsabit' },\n    { id: 11, county_name: 'Isiolo' },\n    { id: 12, county_name: 'Meru' },\n    { id: 13, county_name: 'Tharaka-Nithi' },\n    { id: 14, county_name: 'Embu' },\n    { id: 15, county_name: 'Kitui' },\n    { id: 16, county_name: 'Machakos' },\n    { id: 17, county_name: 'Makueni' },\n    { id: 18, county_name: 'Nyandarua' },\n    { id: 19, county_name: 'Nyeri' },\n    { id: 20, county_name: 'Kirinyaga' },\n    { id: 21, county_name: \"Murang'a\" },\n    { id: 22, county_name: 'Kiambu' },\n    { id: 23, county_name: 'Turkana' },\n    { id: 24, county_name: 'West Pokot' },\n    { id: 25, county_name: 'Samburu' },\n    { id: 26, county_name: 'Trans Nzoia' },\n    { id: 27, county_name: 'Uasin Gishu' },\n    { id: 28, county_name: 'Elgeyo-Marakwet' },\n    { id: 29, county_name: 'Nandi' },\n    { id: 30, county_name: 'Baringo' },\n    { id: 31, county_name: 'Laikipia' },\n    { id: 32, county_name: 'Nakuru' },\n    { id: 33, county_name: 'Narok' },\n    { id: 34, county_name: 'Kajiado' },\n    { id: 35, county_name: 'Kericho' },\n    { id: 36, county_name: 'Bomet' },\n    { id: 37, county_name: 'Kakamega' },\n    { id: 38, county_name: 'Vihiga' },\n    { id: 39, county_name: 'Bungoma' },\n    { id: 40, county_name: 'Busia' },\n    { id: 41, county_name: 'Siaya' },\n    { id: 42, county_name: 'Kisumu' },\n    { id: 43, county_name: 'Homa Bay' },\n    { id: 44, county_name: 'Migori' },\n    { id: 45, county_name: 'Kisii' },\n    { id: 46, county_name: 'Nyamira' },\n    { id: 47, county_name: 'Nairobi' }\n  ];\n\n  useEffect(() => {\n    const fetchProjectTypes = async () => {\n      try {\n        const { data } = await projectsAPI.getProjectTypes();\n        setProjectTypes(data);\n      } catch (err) {\n        console.error('Failed to fetch project types:', err);\n      }\n    };\n    fetchProjectTypes();\n  }, []);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    if (name === 'projectDescription') {\n      setCharCount(value.length);\n    }\n  };\n\n  const validateForm = () => {\n    const errors = {};\n    if (!formData.projectName.trim()) errors.projectName = 'Project name is required';\n    if (!formData.buildingType) errors.buildingType = 'Building type is required';\n    if (!formData.location) errors.location = 'Location is required';\n    if (!formData.total_area || Number(formData.total_area) <= 0) errors.total_area = 'Total area must be greater than 0';\n    if (formData.projectDescription.length > 150) {\n      errors.projectDescription = 'Description must not exceed 150 characters';\n    }\n    return errors;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const errors = validateForm();\n    if (Object.keys(errors).length > 0) {\n      setValidationErrors(errors);\n      return;\n    }\n\n    setIsLoading(true);\n  try {\n      // Find a project_type id that matches selected buildingType category\n      let project_type_id = null;\n      if (projectTypes && projectTypes.length > 0) {\n        const found = projectTypes.find(pt => pt.category === formData.buildingType);\n        project_type_id = found ? found.id : projectTypes[0].id;\n      }\n\n      const payload = {\n        project_type_id: project_type_id,\n        location_id: parseInt(formData.location, 10),\n        total_area: parseFloat(formData.total_area),\n        contingency_percentage: 10.0\n      };\n\n      const { data } = await estimatesAPI.calculateCost(payload);\n      setEstimationResult(data);\n      toast.success('Estimate calculated');\n    } catch (err) {\n      // Improved error logging for debugging\n      console.error('Failed to calculate estimate. Error object:', err);\n      if (err.response) {\n        console.error('Response status:', err.response.status);\n        console.error('Response data:', err.response.data);\n      } else if (err.request) {\n        console.error('No response received. Request:', err.request);\n      } else {\n        console.error('Request setup error:', err.message);\n      }\n      toast.error(err?.response?.data?.error || err?.response?.data?.message || 'Failed to calculate estimate');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handlePlanUpload = async (file) => {\n    setIsLoading(true);\n    try {\n      // Pass file object directly - api wrapper will build FormData\n  const response = await estimatesAPI.uploadEstimate(file);\n      // Build estimationResult from uploaded estimate (server saved calculated fields)\n      const est = response.data.estimate || response.data;\n      if (est) {\n        // compute breakdown similar to backend calculate_cost\n        const adjusted = parseFloat(est.adjusted_cost_per_sqm || (est.base_cost_per_sqm * (est.location_multiplier || 1)));\n        const total_area = parseFloat(est.total_area || 0);\n        const base_total = adjusted * total_area;\n        const contingency = parseFloat(est.contingency_amount || (base_total * (est.contingency_percentage || 10) / 100));\n        const custom_items_total = 0;\n        const final_total = parseFloat(est.total_estimated_cost || (base_total + contingency + custom_items_total));\n\n        setEstimationResult({\n          project_type: est.project_type_data || null,\n          location: est.location_data || null,\n          calculations: {\n            total_area,\n            base_cost_per_sqm: parseFloat(est.base_cost_per_sqm || 0),\n            adjusted_cost_per_sqm: adjusted,\n            base_total_cost: base_total,\n            contingency_percentage: parseFloat(est.contingency_percentage || 10),\n            contingency_amount: contingency,\n            custom_items_total,\n            final_total_cost: final_total\n          },\n          breakdown: {\n            materials: base_total * 0.6,\n            labor: base_total * 0.3,\n            equipment: base_total * 0.1,\n            contingency: contingency,\n            custom_items: custom_items_total\n          }\n        });\n      }\n      toast.success('Plan uploaded successfully');\n    } catch (err) {\n      console.error('Failed to upload plan:', err);\n      toast.error(err?.response?.data?.message || 'Failed to upload plan');\n      throw err;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const formatKES = (value) => {\n    try {\n      const v = Number(value) || 0;\n      return new Intl.NumberFormat('en-KE', { style: 'currency', currency: 'KES', maximumFractionDigits: 2 }).format(v);\n    } catch (e) {\n      return `Ksh ${value}`;\n    }\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">Create New Estimate</h1>\n        <p className=\"mt-2 text-gray-600\">Fill in the project details to generate a construction cost estimate.</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2\">\n          <Card>\n            <Card.Header>\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">Project Details</h2>\n                <div className=\"flex items-center space-x-4\">\n                  {Object.keys(validationErrors).length > 0 && (\n                    <div className=\"flex items-center text-red-600\">\n                      <AlertCircle className=\"w-4 h-4 mr-1\" />\n                      <span className=\"text-sm\">Please fix the errors below</span>\n                    </div>\n                  )}\n                  <div className=\"flex rounded-md shadow-sm\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setMode('manual')}\n                      className={`px-4 py-2 text-sm font-medium rounded-l-md border ${\n                        mode === 'manual'\n                          ? 'bg-primary-500 text-white border-primary-500'\n                          : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'\n                      }`}\n                    >\n                      Manual Entry\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setMode('upload')}\n                      className={`px-4 py-2 text-sm font-medium rounded-r-md border-t border-r border-b ${\n                        mode === 'upload'\n                          ? 'bg-primary-500 text-white border-primary-500'\n                          : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'\n                      }`}\n                    >\n                      Upload Plan\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </Card.Header>\n            \n            <Card.Body>\n              {mode === 'upload' ? (\n                <PlanUploader\n                  onUpload={handlePlanUpload}\n                  onCancel={() => setMode('manual')}\n                />\n              ) : (\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Project Name*\n                      </label>\n                      <Input\n                        type=\"text\"\n                        name=\"projectName\"\n                        value={formData.projectName}\n                        onChange={handleInputChange}\n                        placeholder=\"Enter project name\"\n                        error={validationErrors.projectName}\n                      />\n                      {validationErrors.projectName && (\n                        <p className=\"mt-1 text-sm text-red-600\">{validationErrors.projectName}</p>\n                      )}\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Construction Type*</label>\n                      <select\n                        name=\"constructionType\"\n                        value={formData.constructionType}\n                        onChange={handleInputChange}\n                        className=\"input w-full\"\n                      >\n                        <option value=\"new_construction\">New Construction</option>\n                        <option value=\"repair\">Repair</option>\n                      </select>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Building Type*</label>\n                      <select\n                        name=\"buildingType\"\n                        value={formData.buildingType}\n                        onChange={handleInputChange}\n                        className={`input w-full ${validationErrors.buildingType ? 'border-red-500' : ''}`}\n                      >\n                        <option value=\"\">Select building type</option>\n                        <option value=\"residential\">Residential</option>\n                        <option value=\"commercial\">Commercial</option>\n                        <option value=\"infrastructure\">Infrastructure</option>\n                        <option value=\"industrial\">Industrial</option>\n                      </select>\n                      {validationErrors.buildingType && (\n                        <p className=\"mt-1 text-sm text-red-600\">{validationErrors.buildingType}</p>\n                      )}\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Location (County)*</label>\n                      <select\n                        name=\"location\"\n                        value={formData.location}\n                        onChange={handleInputChange}\n                        className={`input w-full ${validationErrors.location ? 'border-red-500' : ''}`}\n                      >\n                        <option value=\"\">Select county</option>\n                        {COUNTY_LIST && COUNTY_LIST.length > 0 ? (\n                          COUNTY_LIST.map(county => (\n                            <option key={county.id} value={county.id}>\n                              {county.county_name}\n                            </option>\n                          ))\n                        ) : (\n                          <option value=\"\" disabled>Loading counties...</option>\n                        )}\n                      </select>\n                      {validationErrors.location && (\n                        <p className=\"mt-1 text-sm text-red-600\">{validationErrors.location}</p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Data Period</label>\n                      <select\n                        name=\"dataPeriod\"\n                        value={formData.dataPeriod}\n                        onChange={handleInputChange}\n                        className=\"input w-full\"\n                      >\n                        <option value=\"3months\">3 Months</option>\n                        <option value=\"6months\">6 Months</option>\n                        <option value=\"9months\">9 Months</option>\n                        <option value=\"12months\">12 Months</option>\n                      </select>\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">Total Area (sqm)*</label>\n                      <Input\n                        type=\"number\"\n                        name=\"total_area\"\n                        value={formData.total_area || ''}\n                        onChange={handleInputChange}\n                        placeholder=\"Enter total area in sqm\"\n                        error={validationErrors.total_area}\n                      />\n                      {validationErrors.total_area && (\n                        <p className=\"mt-1 text-sm text-red-600\">{validationErrors.total_area}</p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Project Description\n                      <span className=\"text-gray-500 ml-1\">({charCount}/150)</span>\n                    </label>\n                    <textarea\n                      name=\"projectDescription\"\n                      value={formData.projectDescription}\n                      onChange={handleInputChange}\n                      className={`input w-full ${validationErrors.projectDescription ? 'border-red-500' : ''}`}\n                      rows={4}\n                      placeholder=\"Describe your project...\"\n                      maxLength={150}\n                    />\n                    {validationErrors.projectDescription && (\n                      <p className=\"mt-1 text-sm text-red-600\">{validationErrors.projectDescription}</p>\n                    )}\n                  </div>\n\n                  <div className=\"flex justify-end space-x-3\">\n                    <Button type=\"submit\" disabled={isLoading}>\n                      <Calculator className=\"w-4 h-4 mr-2\" />\n                      Generate Estimate\n                    </Button>\n                  </div>\n                </form>\n              )}\n            </Card.Body>\n          </Card>\n        </div>\n\n        <div className=\"lg:col-span-1\">\n          <Card>\n            <Card.Header>\n              <h2 className=\"text-lg font-semibold text-gray-900\">Cost Summary</h2>\n            </Card.Header>\n            <Card.Body>\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\n                  <div className=\"flex justify-between mb-2\">\n                    <span className=\"text-gray-600\">Base Cost</span>\n                    <span className=\"font-medium\">{formatKES(estimationResult?.calculations?.base_total_cost || 0)}</span>\n                  </div>\n                  <div className=\"flex justify-between mb-2\">\n                    <span className=\"text-gray-600\">Materials</span>\n                    <span className=\"font-medium\">{formatKES(estimationResult?.breakdown?.materials || 0)}</span>\n                  </div>\n                  <div className=\"flex justify-between mb-2\">\n                    <span className=\"text-gray-600\">Labor</span>\n                    <span className=\"font-medium\">{formatKES(estimationResult?.breakdown?.labor || 0)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Equipment</span>\n                    <span className=\"font-medium\">{formatKES(estimationResult?.breakdown?.equipment || 0)}</span>\n                  </div>\n                </div>\n\n                <div className=\"bg-primary-50 p-4 rounded-lg\">\n                  <div className=\"flex justify-between mb-2\">\n                    <span className=\"text-primary-600\">Contingency ({estimationResult?.calculations?.contingency_percentage || 0}%)</span>\n                    <span className=\"font-medium text-primary-600\">{formatKES(estimationResult?.calculations?.contingency_amount || 0)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-primary-800 font-semibold\">Total Estimated Cost</span>\n                    <span className=\"font-bold text-primary-800\">{formatKES(estimationResult?.calculations?.final_total_cost || 0)}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-6 space-y-3\">\n                <Button variant=\"secondary\" className=\"w-full\">\n                  <Save className=\"w-4 h-4 mr-2\" />\n                  Save as Draft\n                </Button>\n                <Button variant=\"secondary\" className=\"w-full\">\n                  <Share className=\"w-4 h-4 mr-2\" />\n                  Share Estimate\n                </Button>\n                <Button variant=\"secondary\" className=\"w-full\">\n                  <Download className=\"w-4 h-4 mr-2\" />\n                  Download Report\n                </Button>\n              </div>\n\n              <div className=\"mt-6 p-4 bg-gray-50 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">\n                  This estimate is based on historical data from the selected period and location. \n                  Actual costs may vary based on market conditions and specific requirements.\n                </p>\n              </div>\n            </Card.Body>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EstimatePage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,UAAU,EAAEC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,cAAc;AAC7E,OAAOC,IAAI,MAAM,2BAA2B;AAC5C,OAAOC,MAAM,MAAM,6BAA6B;AAChD,OAAOC,KAAK,MAAM,4BAA4B;AAC9C,OAAOC,YAAY,MAAM,mCAAmC;AAC5D,SAASC,YAAY,EAAEC,WAAW,QAAQ,cAAc;AACxD,OAAOC,KAAK,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,qBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA;EACzB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG1B,QAAQ,CAAC;IACvC2B,WAAW,EAAE,EAAE;IACfC,gBAAgB,EAAE,kBAAkB;IACpCC,YAAY,EAAE,EAAE;IAChBC,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE,SAAS;IACrBC,kBAAkB,EAAE,EAAE;IACtBC,UAAU,EAAE;EACd,CAAC,CAAC;EACF,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGnC,QAAQ,CAAC,QAAQ,CAAC;EAC1C,MAAM,CAACoC,YAAY,EAAEC,eAAe,CAAC,GAAGrC,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACsC,SAAS,EAAEC,YAAY,CAAC,GAAGvC,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACwC,SAAS,EAAEC,YAAY,CAAC,GAAGzC,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAM,CAAC0C,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG3C,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC5D,MAAM,CAAC4C,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG7C,QAAQ,CAAC,IAAI,CAAC;;EAE9D;EACA,MAAM8C,WAAW,GAAG,CAClB;IAAEC,EAAE,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAU,CAAC,EACjC;IAAED,EAAE,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAC/B;IAAED,EAAE,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAS,CAAC,EAChC;IAAED,EAAE,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAa,CAAC,EACpC;IAAED,EAAE,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAO,CAAC,EAC9B;IAAED,EAAE,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAe,CAAC,EACtC;IAAED,EAAE,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAU,CAAC,EACjC;IAAED,EAAE,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAC/B;IAAED,EAAE,EAAE,CAAC;IAAEC,WAAW,EAAE;EAAU,CAAC,EACjC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAW,CAAC,EACnC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAS,CAAC,EACjC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAO,CAAC,EAC/B;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAgB,CAAC,EACxC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAO,CAAC,EAC/B;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAChC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAW,CAAC,EACnC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAU,CAAC,EAClC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAY,CAAC,EACpC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAChC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAY,CAAC,EACpC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAW,CAAC,EACnC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAS,CAAC,EACjC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAU,CAAC,EAClC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAa,CAAC,EACrC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAU,CAAC,EAClC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAc,CAAC,EACtC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAc,CAAC,EACtC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAkB,CAAC,EAC1C;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAChC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAU,CAAC,EAClC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAW,CAAC,EACnC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAS,CAAC,EACjC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAChC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAU,CAAC,EAClC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAU,CAAC,EAClC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAChC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAW,CAAC,EACnC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAS,CAAC,EACjC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAU,CAAC,EAClC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAChC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAChC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAS,CAAC,EACjC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAW,CAAC,EACnC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAS,CAAC,EACjC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAQ,CAAC,EAChC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAU,CAAC,EAClC;IAAED,EAAE,EAAE,EAAE;IAAEC,WAAW,EAAE;EAAU,CAAC,CACnC;EAED/C,SAAS,CAAC,MAAM;IACd,MAAMgD,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MACpC,IAAI;QACF,MAAM;UAAEC;QAAK,CAAC,GAAG,MAAMtC,WAAW,CAACuC,eAAe,CAAC,CAAC;QACpDd,eAAe,CAACa,IAAI,CAAC;MACvB,CAAC,CAAC,OAAOE,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEF,GAAG,CAAC;MACtD;IACF,CAAC;IACDH,iBAAiB,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,iBAAiB,GAAIC,CAAC,IAAK;IAC/B,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChCjC,WAAW,CAACkC,IAAI,KAAK;MACnB,GAAGA,IAAI;MACP,CAACH,IAAI,GAAGC;IACV,CAAC,CAAC,CAAC;IAEH,IAAID,IAAI,KAAK,oBAAoB,EAAE;MACjChB,YAAY,CAACiB,KAAK,CAACG,MAAM,CAAC;IAC5B;EACF,CAAC;EAED,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,MAAM,GAAG,CAAC,CAAC;IACjB,IAAI,CAACtC,QAAQ,CAACE,WAAW,CAACqC,IAAI,CAAC,CAAC,EAAED,MAAM,CAACpC,WAAW,GAAG,0BAA0B;IACjF,IAAI,CAACF,QAAQ,CAACI,YAAY,EAAEkC,MAAM,CAAClC,YAAY,GAAG,2BAA2B;IAC7E,IAAI,CAACJ,QAAQ,CAACK,QAAQ,EAAEiC,MAAM,CAACjC,QAAQ,GAAG,sBAAsB;IAChE,IAAI,CAACL,QAAQ,CAACQ,UAAU,IAAIgC,MAAM,CAACxC,QAAQ,CAACQ,UAAU,CAAC,IAAI,CAAC,EAAE8B,MAAM,CAAC9B,UAAU,GAAG,mCAAmC;IACrH,IAAIR,QAAQ,CAACO,kBAAkB,CAAC6B,MAAM,GAAG,GAAG,EAAE;MAC5CE,MAAM,CAAC/B,kBAAkB,GAAG,4CAA4C;IAC1E;IACA,OAAO+B,MAAM;EACf,CAAC;EAED,MAAMG,YAAY,GAAG,MAAOV,CAAC,IAAK;IAChCA,CAAC,CAACW,cAAc,CAAC,CAAC;IAClB,MAAMJ,MAAM,GAAGD,YAAY,CAAC,CAAC;IAC7B,IAAIM,MAAM,CAACC,IAAI,CAACN,MAAM,CAAC,CAACF,MAAM,GAAG,CAAC,EAAE;MAClClB,mBAAmB,CAACoB,MAAM,CAAC;MAC3B;IACF;IAEAxB,YAAY,CAAC,IAAI,CAAC;IACpB,IAAI;MACA;MACA,IAAI+B,eAAe,GAAG,IAAI;MAC1B,IAAIlC,YAAY,IAAIA,YAAY,CAACyB,MAAM,GAAG,CAAC,EAAE;QAC3C,MAAMU,KAAK,GAAGnC,YAAY,CAACoC,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACC,QAAQ,KAAKjD,QAAQ,CAACI,YAAY,CAAC;QAC5EyC,eAAe,GAAGC,KAAK,GAAGA,KAAK,CAACxB,EAAE,GAAGX,YAAY,CAAC,CAAC,CAAC,CAACW,EAAE;MACzD;MAEA,MAAM4B,OAAO,GAAG;QACdL,eAAe,EAAEA,eAAe;QAChCM,WAAW,EAAEC,QAAQ,CAACpD,QAAQ,CAACK,QAAQ,EAAE,EAAE,CAAC;QAC5CG,UAAU,EAAE6C,UAAU,CAACrD,QAAQ,CAACQ,UAAU,CAAC;QAC3C8C,sBAAsB,EAAE;MAC1B,CAAC;MAED,MAAM;QAAE7B;MAAK,CAAC,GAAG,MAAMvC,YAAY,CAACqE,aAAa,CAACL,OAAO,CAAC;MAC1D9B,mBAAmB,CAACK,IAAI,CAAC;MACzBrC,KAAK,CAACoE,OAAO,CAAC,qBAAqB,CAAC;IACtC,CAAC,CAAC,OAAO7B,GAAG,EAAE;MAAA,IAAA8B,aAAA,EAAAC,kBAAA,EAAAC,cAAA,EAAAC,mBAAA;MACZ;MACAhC,OAAO,CAACC,KAAK,CAAC,6CAA6C,EAAEF,GAAG,CAAC;MACjE,IAAIA,GAAG,CAACkC,QAAQ,EAAE;QAChBjC,OAAO,CAACC,KAAK,CAAC,kBAAkB,EAAEF,GAAG,CAACkC,QAAQ,CAACC,MAAM,CAAC;QACtDlC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAACkC,QAAQ,CAACpC,IAAI,CAAC;MACpD,CAAC,MAAM,IAAIE,GAAG,CAACoC,OAAO,EAAE;QACtBnC,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEF,GAAG,CAACoC,OAAO,CAAC;MAC9D,CAAC,MAAM;QACLnC,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEF,GAAG,CAACqC,OAAO,CAAC;MACpD;MACA5E,KAAK,CAACyC,KAAK,CAAC,CAAAF,GAAG,aAAHA,GAAG,wBAAA8B,aAAA,GAAH9B,GAAG,CAAEkC,QAAQ,cAAAJ,aAAA,wBAAAC,kBAAA,GAAbD,aAAA,CAAehC,IAAI,cAAAiC,kBAAA,uBAAnBA,kBAAA,CAAqB7B,KAAK,MAAIF,GAAG,aAAHA,GAAG,wBAAAgC,cAAA,GAAHhC,GAAG,CAAEkC,QAAQ,cAAAF,cAAA,wBAAAC,mBAAA,GAAbD,cAAA,CAAelC,IAAI,cAAAmC,mBAAA,uBAAnBA,mBAAA,CAAqBI,OAAO,KAAI,8BAA8B,CAAC;IAC3G,CAAC,SAAS;MACRlD,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMmD,gBAAgB,GAAG,MAAOC,IAAI,IAAK;IACvCpD,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACF;MACJ,MAAM+C,QAAQ,GAAG,MAAM3E,YAAY,CAACiF,cAAc,CAACD,IAAI,CAAC;MACpD;MACA,MAAME,GAAG,GAAGP,QAAQ,CAACpC,IAAI,CAAC4C,QAAQ,IAAIR,QAAQ,CAACpC,IAAI;MACnD,IAAI2C,GAAG,EAAE;QACP;QACA,MAAME,QAAQ,GAAGjB,UAAU,CAACe,GAAG,CAACG,qBAAqB,IAAKH,GAAG,CAACI,iBAAiB,IAAIJ,GAAG,CAACK,mBAAmB,IAAI,CAAC,CAAE,CAAC;QAClH,MAAMjE,UAAU,GAAG6C,UAAU,CAACe,GAAG,CAAC5D,UAAU,IAAI,CAAC,CAAC;QAClD,MAAMkE,UAAU,GAAGJ,QAAQ,GAAG9D,UAAU;QACxC,MAAMmE,WAAW,GAAGtB,UAAU,CAACe,GAAG,CAACQ,kBAAkB,IAAKF,UAAU,IAAIN,GAAG,CAACd,sBAAsB,IAAI,EAAE,CAAC,GAAG,GAAI,CAAC;QACjH,MAAMuB,kBAAkB,GAAG,CAAC;QAC5B,MAAMC,WAAW,GAAGzB,UAAU,CAACe,GAAG,CAACW,oBAAoB,IAAKL,UAAU,GAAGC,WAAW,GAAGE,kBAAmB,CAAC;QAE3GzD,mBAAmB,CAAC;UAClB4D,YAAY,EAAEZ,GAAG,CAACa,iBAAiB,IAAI,IAAI;UAC3C5E,QAAQ,EAAE+D,GAAG,CAACc,aAAa,IAAI,IAAI;UACnCC,YAAY,EAAE;YACZ3E,UAAU;YACVgE,iBAAiB,EAAEnB,UAAU,CAACe,GAAG,CAACI,iBAAiB,IAAI,CAAC,CAAC;YACzDD,qBAAqB,EAAED,QAAQ;YAC/Bc,eAAe,EAAEV,UAAU;YAC3BpB,sBAAsB,EAAED,UAAU,CAACe,GAAG,CAACd,sBAAsB,IAAI,EAAE,CAAC;YACpEsB,kBAAkB,EAAED,WAAW;YAC/BE,kBAAkB;YAClBQ,gBAAgB,EAAEP;UACpB,CAAC;UACDQ,SAAS,EAAE;YACTC,SAAS,EAAEb,UAAU,GAAG,GAAG;YAC3Bc,KAAK,EAAEd,UAAU,GAAG,GAAG;YACvBe,SAAS,EAAEf,UAAU,GAAG,GAAG;YAC3BC,WAAW,EAAEA,WAAW;YACxBe,YAAY,EAAEb;UAChB;QACF,CAAC,CAAC;MACJ;MACAzF,KAAK,CAACoE,OAAO,CAAC,4BAA4B,CAAC;IAC7C,CAAC,CAAC,OAAO7B,GAAG,EAAE;MAAA,IAAAgE,cAAA,EAAAC,mBAAA;MACZhE,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;MAC5CvC,KAAK,CAACyC,KAAK,CAAC,CAAAF,GAAG,aAAHA,GAAG,wBAAAgE,cAAA,GAAHhE,GAAG,CAAEkC,QAAQ,cAAA8B,cAAA,wBAAAC,mBAAA,GAAbD,cAAA,CAAelE,IAAI,cAAAmE,mBAAA,uBAAnBA,mBAAA,CAAqB5B,OAAO,KAAI,uBAAuB,CAAC;MACpE,MAAMrC,GAAG;IACX,CAAC,SAAS;MACRb,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAM+E,SAAS,GAAI5D,KAAK,IAAK;IAC3B,IAAI;MACF,MAAM6D,CAAC,GAAGtD,MAAM,CAACP,KAAK,CAAC,IAAI,CAAC;MAC5B,OAAO,IAAI8D,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,UAAU;QAAEC,QAAQ,EAAE,KAAK;QAAEC,qBAAqB,EAAE;MAAE,CAAC,CAAC,CAACC,MAAM,CAACN,CAAC,CAAC;IACnH,CAAC,CAAC,OAAO/D,CAAC,EAAE;MACV,OAAO,OAAOE,KAAK,EAAE;IACvB;EACF,CAAC;EAED,oBACE3C,OAAA;IAAK+G,SAAS,EAAC,6CAA6C;IAAAC,QAAA,gBAC1DhH,OAAA;MAAK+G,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnBhH,OAAA;QAAI+G,SAAS,EAAC,kCAAkC;QAAAC,QAAA,EAAC;MAAmB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACzEpH,OAAA;QAAG+G,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAAqE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxG,CAAC,eAENpH,OAAA;MAAK+G,SAAS,EAAC,uCAAuC;MAAAC,QAAA,gBACpDhH,OAAA;QAAK+G,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5BhH,OAAA,CAACR,IAAI;UAAAwH,QAAA,gBACHhH,OAAA,CAACR,IAAI,CAAC6H,MAAM;YAAAL,QAAA,eACVhH,OAAA;cAAK+G,SAAS,EAAC,mCAAmC;cAAAC,QAAA,gBAChDhH,OAAA;gBAAI+G,SAAS,EAAC,qCAAqC;gBAAAC,QAAA,EAAC;cAAe;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACxEpH,OAAA;gBAAK+G,SAAS,EAAC,6BAA6B;gBAAAC,QAAA,GACzC3D,MAAM,CAACC,IAAI,CAAC3B,gBAAgB,CAAC,CAACmB,MAAM,GAAG,CAAC,iBACvC9C,OAAA;kBAAK+G,SAAS,EAAC,gCAAgC;kBAAAC,QAAA,gBAC7ChH,OAAA,CAACT,WAAW;oBAACwH,SAAS,EAAC;kBAAc;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,eACxCpH,OAAA;oBAAM+G,SAAS,EAAC,SAAS;oBAAAC,QAAA,EAAC;kBAA2B;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzD,CACN,eACDpH,OAAA;kBAAK+G,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,gBACxChH,OAAA;oBACEsH,IAAI,EAAC,QAAQ;oBACbC,OAAO,EAAEA,CAAA,KAAMnG,OAAO,CAAC,QAAQ,CAAE;oBACjC2F,SAAS,EAAE,qDACT5F,IAAI,KAAK,QAAQ,GACb,8CAA8C,GAC9C,yDAAyD,EAC5D;oBAAA6F,QAAA,EACJ;kBAED;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eACTpH,OAAA;oBACEsH,IAAI,EAAC,QAAQ;oBACbC,OAAO,EAAEA,CAAA,KAAMnG,OAAO,CAAC,QAAQ,CAAE;oBACjC2F,SAAS,EAAE,yEACT5F,IAAI,KAAK,QAAQ,GACb,8CAA8C,GAC9C,yDAAyD,EAC5D;oBAAA6F,QAAA,EACJ;kBAED;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK,CAAC,eAEdpH,OAAA,CAACR,IAAI,CAACgI,IAAI;YAAAR,QAAA,EACP7F,IAAI,KAAK,QAAQ,gBAChBnB,OAAA,CAACL,YAAY;cACX8H,QAAQ,EAAE9C,gBAAiB;cAC3B+C,QAAQ,EAAEA,CAAA,KAAMtG,OAAO,CAAC,QAAQ;YAAE;cAAA6F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnC,CAAC,gBAEFpH,OAAA;cAAM2H,QAAQ,EAAExE,YAAa;cAAC4D,SAAS,EAAC,WAAW;cAAAC,QAAA,gBACjDhH,OAAA;gBAAK+G,SAAS,EAAC,uCAAuC;gBAAAC,QAAA,gBACpDhH,OAAA;kBAAAgH,QAAA,gBACEhH,OAAA;oBAAO+G,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAEhE;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACRpH,OAAA,CAACN,KAAK;oBACJ4H,IAAI,EAAC,MAAM;oBACX5E,IAAI,EAAC,aAAa;oBAClBC,KAAK,EAAEjC,QAAQ,CAACE,WAAY;oBAC5BgH,QAAQ,EAAEpF,iBAAkB;oBAC5BqF,WAAW,EAAC,oBAAoB;oBAChCtF,KAAK,EAAEZ,gBAAgB,CAACf;kBAAY;oBAAAqG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrC,CAAC,EACDzF,gBAAgB,CAACf,WAAW,iBAC3BZ,OAAA;oBAAG+G,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,EAAErF,gBAAgB,CAACf;kBAAW;oBAAAqG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAC3E;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC,eACNpH,OAAA;kBAAAgH,QAAA,gBACEhH,OAAA;oBAAO+G,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAkB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC1FpH,OAAA;oBACE0C,IAAI,EAAC,kBAAkB;oBACvBC,KAAK,EAAEjC,QAAQ,CAACG,gBAAiB;oBACjC+G,QAAQ,EAAEpF,iBAAkB;oBAC5BuE,SAAS,EAAC,cAAc;oBAAAC,QAAA,gBAExBhH,OAAA;sBAAQ2C,KAAK,EAAC,kBAAkB;sBAAAqE,QAAA,EAAC;oBAAgB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAC1DpH,OAAA;sBAAQ2C,KAAK,EAAC,QAAQ;sBAAAqE,QAAA,EAAC;oBAAM;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAChC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eAENpH,OAAA;gBAAK+G,SAAS,EAAC,uCAAuC;gBAAAC,QAAA,gBACpDhH,OAAA;kBAAAgH,QAAA,gBACEhH,OAAA;oBAAO+G,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAc;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACtFpH,OAAA;oBACE0C,IAAI,EAAC,cAAc;oBACnBC,KAAK,EAAEjC,QAAQ,CAACI,YAAa;oBAC7B8G,QAAQ,EAAEpF,iBAAkB;oBAC5BuE,SAAS,EAAE,gBAAgBpF,gBAAgB,CAACb,YAAY,GAAG,gBAAgB,GAAG,EAAE,EAAG;oBAAAkG,QAAA,gBAEnFhH,OAAA;sBAAQ2C,KAAK,EAAC,EAAE;sBAAAqE,QAAA,EAAC;oBAAoB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAC9CpH,OAAA;sBAAQ2C,KAAK,EAAC,aAAa;sBAAAqE,QAAA,EAAC;oBAAW;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAChDpH,OAAA;sBAAQ2C,KAAK,EAAC,YAAY;sBAAAqE,QAAA,EAAC;oBAAU;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAC9CpH,OAAA;sBAAQ2C,KAAK,EAAC,gBAAgB;sBAAAqE,QAAA,EAAC;oBAAc;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACtDpH,OAAA;sBAAQ2C,KAAK,EAAC,YAAY;sBAAAqE,QAAA,EAAC;oBAAU;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACxC,CAAC,EACRzF,gBAAgB,CAACb,YAAY,iBAC5Bd,OAAA;oBAAG+G,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,EAAErF,gBAAgB,CAACb;kBAAY;oBAAAmG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAC5E;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC,eACNpH,OAAA;kBAAAgH,QAAA,gBACEhH,OAAA;oBAAO+G,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAkB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC1FpH,OAAA;oBACE0C,IAAI,EAAC,UAAU;oBACfC,KAAK,EAAEjC,QAAQ,CAACK,QAAS;oBACzB6G,QAAQ,EAAEpF,iBAAkB;oBAC5BuE,SAAS,EAAE,gBAAgBpF,gBAAgB,CAACZ,QAAQ,GAAG,gBAAgB,GAAG,EAAE,EAAG;oBAAAiG,QAAA,gBAE/EhH,OAAA;sBAAQ2C,KAAK,EAAC,EAAE;sBAAAqE,QAAA,EAAC;oBAAa;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,EACtCrF,WAAW,IAAIA,WAAW,CAACe,MAAM,GAAG,CAAC,GACpCf,WAAW,CAAC+F,GAAG,CAACC,MAAM,iBACpB/H,OAAA;sBAAwB2C,KAAK,EAAEoF,MAAM,CAAC/F,EAAG;sBAAAgF,QAAA,EACtCe,MAAM,CAAC9F;oBAAW,GADR8F,MAAM,CAAC/F,EAAE;sBAAAiF,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAEd,CACT,CAAC,gBAEFpH,OAAA;sBAAQ2C,KAAK,EAAC,EAAE;sBAACqF,QAAQ;sBAAAhB,QAAA,EAAC;oBAAmB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CACtD;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACK,CAAC,EACRzF,gBAAgB,CAACZ,QAAQ,iBACxBf,OAAA;oBAAG+G,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,EAAErF,gBAAgB,CAACZ;kBAAQ;oBAAAkG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CACxE;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eAENpH,OAAA;gBAAK+G,SAAS,EAAC,uCAAuC;gBAAAC,QAAA,gBACpDhH,OAAA;kBAAAgH,QAAA,gBACEhH,OAAA;oBAAO+G,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAW;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACnFpH,OAAA;oBACE0C,IAAI,EAAC,YAAY;oBACjBC,KAAK,EAAEjC,QAAQ,CAACM,UAAW;oBAC3B4G,QAAQ,EAAEpF,iBAAkB;oBAC5BuE,SAAS,EAAC,cAAc;oBAAAC,QAAA,gBAExBhH,OAAA;sBAAQ2C,KAAK,EAAC,SAAS;sBAAAqE,QAAA,EAAC;oBAAQ;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACzCpH,OAAA;sBAAQ2C,KAAK,EAAC,SAAS;sBAAAqE,QAAA,EAAC;oBAAQ;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACzCpH,OAAA;sBAAQ2C,KAAK,EAAC,SAAS;sBAAAqE,QAAA,EAAC;oBAAQ;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACzCpH,OAAA;sBAAQ2C,KAAK,EAAC,UAAU;sBAAAqE,QAAA,EAAC;oBAAS;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC,eACNpH,OAAA;kBAAAgH,QAAA,gBACEhH,OAAA;oBAAO+G,SAAS,EAAC,8CAA8C;oBAAAC,QAAA,EAAC;kBAAiB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eACzFpH,OAAA,CAACN,KAAK;oBACJ4H,IAAI,EAAC,QAAQ;oBACb5E,IAAI,EAAC,YAAY;oBACjBC,KAAK,EAAEjC,QAAQ,CAACQ,UAAU,IAAI,EAAG;oBACjC0G,QAAQ,EAAEpF,iBAAkB;oBAC5BqF,WAAW,EAAC,yBAAyB;oBACrCtF,KAAK,EAAEZ,gBAAgB,CAACT;kBAAW;oBAAA+F,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpC,CAAC,EACDzF,gBAAgB,CAACT,UAAU,iBAC1BlB,OAAA;oBAAG+G,SAAS,EAAC,2BAA2B;oBAAAC,QAAA,EAAErF,gBAAgB,CAACT;kBAAU;oBAAA+F,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAC1E;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eAENpH,OAAA;gBAAAgH,QAAA,gBACEhH,OAAA;kBAAO+G,SAAS,EAAC,8CAA8C;kBAAAC,QAAA,GAAC,qBAE9D,eAAAhH,OAAA;oBAAM+G,SAAS,EAAC,oBAAoB;oBAAAC,QAAA,GAAC,GAAC,EAACvF,SAAS,EAAC,OAAK;kBAAA;oBAAAwF,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACxD,CAAC,eACRpH,OAAA;kBACE0C,IAAI,EAAC,oBAAoB;kBACzBC,KAAK,EAAEjC,QAAQ,CAACO,kBAAmB;kBACnC2G,QAAQ,EAAEpF,iBAAkB;kBAC5BuE,SAAS,EAAE,gBAAgBpF,gBAAgB,CAACV,kBAAkB,GAAG,gBAAgB,GAAG,EAAE,EAAG;kBACzFgH,IAAI,EAAE,CAAE;kBACRJ,WAAW,EAAC,0BAA0B;kBACtCK,SAAS,EAAE;gBAAI;kBAAAjB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChB,CAAC,EACDzF,gBAAgB,CAACV,kBAAkB,iBAClCjB,OAAA;kBAAG+G,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,EAAErF,gBAAgB,CAACV;gBAAkB;kBAAAgG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAClF;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eAENpH,OAAA;gBAAK+G,SAAS,EAAC,4BAA4B;gBAAAC,QAAA,eACzChH,OAAA,CAACP,MAAM;kBAAC6H,IAAI,EAAC,QAAQ;kBAACU,QAAQ,EAAEzG,SAAU;kBAAAyF,QAAA,gBACxChH,OAAA,CAACb,UAAU;oBAAC4H,SAAS,EAAC;kBAAc;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,qBAEzC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACF;UACP;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC,eAENpH,OAAA;QAAK+G,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5BhH,OAAA,CAACR,IAAI;UAAAwH,QAAA,gBACHhH,OAAA,CAACR,IAAI,CAAC6H,MAAM;YAAAL,QAAA,eACVhH,OAAA;cAAI+G,SAAS,EAAC,qCAAqC;cAAAC,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1D,CAAC,eACdpH,OAAA,CAACR,IAAI,CAACgI,IAAI;YAAAR,QAAA,gBACRhH,OAAA;cAAK+G,SAAS,EAAC,WAAW;cAAAC,QAAA,gBACxBhH,OAAA;gBAAK+G,SAAS,EAAC,2BAA2B;gBAAAC,QAAA,gBACxChH,OAAA;kBAAK+G,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,gBACxChH,OAAA;oBAAM+G,SAAS,EAAC,eAAe;oBAAAC,QAAA,EAAC;kBAAS;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAChDpH,OAAA;oBAAM+G,SAAS,EAAC,aAAa;oBAAAC,QAAA,EAAET,SAAS,CAAC,CAAA1E,gBAAgB,aAAhBA,gBAAgB,wBAAA1B,qBAAA,GAAhB0B,gBAAgB,CAAEgE,YAAY,cAAA1F,qBAAA,uBAA9BA,qBAAA,CAAgC2F,eAAe,KAAI,CAAC;kBAAC;oBAAAmB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnG,CAAC,eACNpH,OAAA;kBAAK+G,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,gBACxChH,OAAA;oBAAM+G,SAAS,EAAC,eAAe;oBAAAC,QAAA,EAAC;kBAAS;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAChDpH,OAAA;oBAAM+G,SAAS,EAAC,aAAa;oBAAAC,QAAA,EAAET,SAAS,CAAC,CAAA1E,gBAAgB,aAAhBA,gBAAgB,wBAAAzB,qBAAA,GAAhByB,gBAAgB,CAAEmE,SAAS,cAAA5F,qBAAA,uBAA3BA,qBAAA,CAA6B6F,SAAS,KAAI,CAAC;kBAAC;oBAAAgB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC1F,CAAC,eACNpH,OAAA;kBAAK+G,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,gBACxChH,OAAA;oBAAM+G,SAAS,EAAC,eAAe;oBAAAC,QAAA,EAAC;kBAAK;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC5CpH,OAAA;oBAAM+G,SAAS,EAAC,aAAa;oBAAAC,QAAA,EAAET,SAAS,CAAC,CAAA1E,gBAAgB,aAAhBA,gBAAgB,wBAAAxB,sBAAA,GAAhBwB,gBAAgB,CAAEmE,SAAS,cAAA3F,sBAAA,uBAA3BA,sBAAA,CAA6B6F,KAAK,KAAI,CAAC;kBAAC;oBAAAe,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACtF,CAAC,eACNpH,OAAA;kBAAK+G,SAAS,EAAC,sBAAsB;kBAAAC,QAAA,gBACnChH,OAAA;oBAAM+G,SAAS,EAAC,eAAe;oBAAAC,QAAA,EAAC;kBAAS;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAChDpH,OAAA;oBAAM+G,SAAS,EAAC,aAAa;oBAAAC,QAAA,EAAET,SAAS,CAAC,CAAA1E,gBAAgB,aAAhBA,gBAAgB,wBAAAvB,sBAAA,GAAhBuB,gBAAgB,CAAEmE,SAAS,cAAA1F,sBAAA,uBAA3BA,sBAAA,CAA6B6F,SAAS,KAAI,CAAC;kBAAC;oBAAAc,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC1F,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eAENpH,OAAA;gBAAK+G,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,gBAC3ChH,OAAA;kBAAK+G,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,gBACxChH,OAAA;oBAAM+G,SAAS,EAAC,kBAAkB;oBAAAC,QAAA,GAAC,eAAa,EAAC,CAAAnF,gBAAgB,aAAhBA,gBAAgB,wBAAAtB,sBAAA,GAAhBsB,gBAAgB,CAAEgE,YAAY,cAAAtF,sBAAA,uBAA9BA,sBAAA,CAAgCyD,sBAAsB,KAAI,CAAC,EAAC,IAAE;kBAAA;oBAAAiD,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACtHpH,OAAA;oBAAM+G,SAAS,EAAC,8BAA8B;oBAAAC,QAAA,EAAET,SAAS,CAAC,CAAA1E,gBAAgB,aAAhBA,gBAAgB,wBAAArB,sBAAA,GAAhBqB,gBAAgB,CAAEgE,YAAY,cAAArF,sBAAA,uBAA9BA,sBAAA,CAAgC8E,kBAAkB,KAAI,CAAC;kBAAC;oBAAA2B,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvH,CAAC,eACNpH,OAAA;kBAAK+G,SAAS,EAAC,sBAAsB;kBAAAC,QAAA,gBACnChH,OAAA;oBAAM+G,SAAS,EAAC,gCAAgC;oBAAAC,QAAA,EAAC;kBAAoB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC5EpH,OAAA;oBAAM+G,SAAS,EAAC,4BAA4B;oBAAAC,QAAA,EAAET,SAAS,CAAC,CAAA1E,gBAAgB,aAAhBA,gBAAgB,wBAAApB,sBAAA,GAAhBoB,gBAAgB,CAAEgE,YAAY,cAAApF,sBAAA,uBAA9BA,sBAAA,CAAgCsF,gBAAgB,KAAI,CAAC;kBAAC;oBAAAkB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnH,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAENpH,OAAA;cAAK+G,SAAS,EAAC,gBAAgB;cAAAC,QAAA,gBAC7BhH,OAAA,CAACP,MAAM;gBAAC0I,OAAO,EAAC,WAAW;gBAACpB,SAAS,EAAC,QAAQ;gBAAAC,QAAA,gBAC5ChH,OAAA,CAACZ,IAAI;kBAAC2H,SAAS,EAAC;gBAAc;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,iBAEnC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTpH,OAAA,CAACP,MAAM;gBAAC0I,OAAO,EAAC,WAAW;gBAACpB,SAAS,EAAC,QAAQ;gBAAAC,QAAA,gBAC5ChH,OAAA,CAACX,KAAK;kBAAC0H,SAAS,EAAC;gBAAc;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,kBAEpC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTpH,OAAA,CAACP,MAAM;gBAAC0I,OAAO,EAAC,WAAW;gBAACpB,SAAS,EAAC,QAAQ;gBAAAC,QAAA,gBAC5ChH,OAAA,CAACV,QAAQ;kBAACyH,SAAS,EAAC;gBAAc;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,mBAEvC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eAENpH,OAAA;cAAK+G,SAAS,EAAC,gCAAgC;cAAAC,QAAA,eAC7ChH,OAAA;gBAAG+G,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAC;cAGrC;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAClH,EAAA,CA/cID,YAAY;AAAAmI,EAAA,GAAZnI,YAAY;AAidlB,eAAeA,YAAY;AAAC,IAAAmI,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}